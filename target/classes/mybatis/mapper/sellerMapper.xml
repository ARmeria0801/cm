<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="sellerMapper">
	<!-- 상품 등록 -->
	<insert id="goods_insert" parameterType="goods">
		insert into goods
		(lcate_code, mcate_code, scate_code, gds_seller, gds_name, gds_thumbnail, gds_date,
		gds_price, gds_detail, gds_option, deltem_num, gds_count,
		gds_ears, gds_readcount, gds_sellcount, gds_viewyn, gds_delyn)
		values
		(#{lcate_code}, #{mcate_code}, #{scate_code}, #{gds_seller}, #{gds_name}, #{gds_thumbnail}, now(),
		#{gds_price}, #{gds_detail}, #{gds_option}, #{deltem_num}, #{gds_count}, 
		#{gds_ears}, 0, 0, 'Y', 'Y')
	</insert>
	
	<!-- 판매자별 총 등록 상품 개수 -->
	<select id="seller_goods_count" resultType="int">
		select count(*) from goods where gds_delyn='y'
		<!-- and gds_seller=${gds_seller} -->
	</select>
	
	<!-- 판매자별 상품 리스트 출력 -->
	<select id="seller_goods_list" resultType="goods" parameterType="int">
		select * from goods
		where gds_delyn='y' <!-- and gds_seller=${gds_seller} -->
		order by gds_num desc
		limit #{pageIndex}, 10
	</select>
	
	<!-- 판매자별 상품 리스트 출력 -->
	<select id="goods_detail" resultType="goods" parameterType="int">
		select * from goods where gds_num=#{gds_num}
	</select>
	
	<!-- 상품 수정하기 -->
	<update id="goods_update" parameterType="goods">
		UPDATE goods
		SET
		lcate_code = #{lcate_code},
		mcate_code = #{mcate_code},
		scate_code = #{scate_code},
		gds_name = #{gds_name},
		gds_price = #{gds_price},
		gds_detail = #{gds_detail},
		gds_option = #{gds_option},
		gds_count = #{gds_count},
		gds_thumbnail = #{gds_thumbnail},
		deltem_num = #{deltem_num},
		gds_ears = #{gds_ears}
		WHERE gds_num = #{gds_num}
	</update>
	
	<!-- 상품 삭제하기 -->
	<delete id="goods_delete" parameterType="int">
		delete from goods where gds_num=#{gds_num}
	</delete>
	
	<!-- 판매중지 -->
	<update id="goods_update_viewn" parameterType="int">
		update goods
		set
		gds_viewyn = 'n'
		where gds_num = #{gds_num}
	</update>
	
	<!-- 판매중으로 전환 -->
	<update id="goods_update_viewy" parameterType="int">
		update goods
		set
		gds_viewyn = 'y'
		where gds_num = #{gds_num}
	</update>
	
</mapper>
	